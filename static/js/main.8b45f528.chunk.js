(this.webpackJsonpscroll=this.webpackJsonpscroll||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(4),i=n.n(c),o=n(33),a=n.n(o),r=(n(38),n(20)),u=n(19),s=n(16),l=(n(39),n(46)),b=n(47),f=n(29),j=n(48),p=n(50),h=n(28),O=n(44),d=n(45),g=n(51),m=n(49),w=n(6);function v(e){var t=e.comp,n=e.onNewPos,i=Object(c.useState)(!1),o=Object(s.a)(i,2),a=o[0],r=o[1],u=Object(c.useRef)(null);return u.current=function(e){if(a){var c=e.target.getBoundingClientRect(),i={x:c.left,y:c.top,width:c.width,height:c.height};n({x:t.x+e.movementX,y:t.y+e.movementY},i)}},Object(c.useEffect)((function(){window.addEventListener("mousemove",(function(e){u.current(e)}))}),[]),Object(w.jsx)("div",{style:{left:t.x,top:t.y,height:t.height,width:t.width},onMouseDown:function(){r(!0)},onMouseUp:function(){r(!1)},className:"comp"})}var y={page:{height:14e3,width:900},components:[{id:1,x:600,y:300,width:150,height:80}]},x=function(e,t){return"setNewPos"===t.type?Object(u.a)(Object(u.a)({},e),{},{components:e.components.map((function(e){return e.id===t.data.id?Object(u.a)(Object(u.a)({},e),t.data.pos):e}))}):e},A=i.a.forwardRef((function(e,t){return Object(r.a)(e),Object(w.jsx)("div",{ref:t,style:{height:100},className:"scrollarea"})})),M=i.a.memo((function(){return null}));var N=function(){var e=Object(c.useReducer)(x,y),t=Object(s.a)(e,2),n=t[0],o=t[1],a=i.a.useMemo((function(){return function(e){Object(r.a)(e);var t=new l.a(null),n=new l.a(null),c=Object(b.a)([t,n]).pipe(Object(h.a)((function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1];if(!n||!c)return 0;var i=n.y+n.height-c.y;return i<=0?0:((i/=c.height)>=1&&(i=1),i=Math.ceil(20*i)/20)}))).pipe(Object(O.a)()),i=c.pipe(Object(h.a)((function(e){return 0!==e}))).pipe(Object(O.a)()).pipe(Object(d.a)((function(e){if(!e)return Object(f.a)(0);var t=Math.ceil(15),n=Object(j.a)(Object(f.a)(-1),Object(p.a)(100)).pipe(Object(g.a)(t),Object(h.a)((function(e){return(e+2)/t}))),i=Object(f.a)(0).pipe(Object(m.a)(300));return Object(j.a)(i,Object(b.a)([c,n]).pipe(Object(h.a)((function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1],i=Math.pow(n,1.5)*c;return Math.ceil(100*i)/100*1}))))})));return i.subscribe((function(e){console.log("scrollSpeed$",e)})),c.subscribe((function(e){})),{setDraggableAbsLayout:function(e){return t.next(e)},setScrollAreaAbsLayout:function(e){return n.next(e)},scrollSpeed$:i}}({})}),[]),u=a.setDraggableAbsLayout,N=a.scrollSpeed$,S=a.setScrollAreaAbsLayout,L=Object(c.useRef)(),R=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=null;N.subscribe((function(t){e&&e(),0!==t&&(e=function(e,t,n){var c=(e=document.scrollingElement).scrollTop,i=(new Date).getTime(),o=null,a=0;return function r(){o=null;var u=(new Date).getTime(),s=(a+=n*(u-i)-a)+c;e.scrollTop=s,t<s||(o=requestAnimationFrame(r))}(),function(){o&&cancelAnimationFrame(o)}}(R.current,n.page.height-1e3,t))}));var t=L.current.getBoundingClientRect();S({x:t.left,y:t.top,height:t.height,width:t.width})}),[]),Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(A,{ref:L}),Object(w.jsx)(M,{}),Object(w.jsx)("div",{ref:R,style:{height:n.page.height,width:n.page.width},className:"page",children:n.components.map((function(e){return Object(w.jsx)(v,{comp:e,onNewPos:function(t,n){o({type:"setNewPos",data:{id:e.id,pos:t}}),u(n)}},e.id)}))})]})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),o(e),a(e)}))};a.a.render(Object(w.jsx)(i.a.StrictMode,{children:Object(w.jsx)(N,{})}),document.getElementById("root")),S()}},[[41,1,2]]]);
//# sourceMappingURL=main.8b45f528.chunk.js.map