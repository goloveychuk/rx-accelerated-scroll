(this.webpackJsonpscroll=this.webpackJsonpscroll||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(4),i=n.n(c),a=n(32),o=n.n(a),r=(n(38),n(33)),u=n(19),s=n(16),l=(n(39),n(46)),b=n(47),f=n(28),p=n(48),j=n(50),h=n(27),d=n(44),O=n(45),g=n(51),m=n(49),v=n(6);function w(e){var t=e.comp,n=e.onNewPos,i=Object(c.useState)(!1),a=Object(s.a)(i,2),o=a[0],r=a[1],u=Object(c.useRef)(null);return u.current=function(e){if(o){var c=e.target.getBoundingClientRect(),i={x:c.left,y:c.top,width:c.width,height:c.height};n({x:t.x+e.movementX,y:t.y+e.movementY},i)}},Object(c.useEffect)((function(){window.addEventListener("mousemove",(function(e){u.current(e)}))}),[]),Object(v.jsx)("div",{style:{left:t.x,top:t.y,height:t.height,width:t.width},onMouseDown:function(){r(!0)},onMouseUp:function(){r(!1)},className:"comp"})}var y={page:{height:14e3,width:900},components:[{id:1,x:600,y:300,width:150,height:80}]},x=function(e,t){return"setNewPos"===t.type?Object(u.a)(Object(u.a)({},e),{},{components:e.components.map((function(e){return e.id===t.data.id?Object(u.a)(Object(u.a)({},e),t.data.pos):e}))}):e},S=i.a.forwardRef((function(e,t){return Object(r.a)(e),Object(v.jsx)("div",{ref:t,style:{height:100},className:"scrollarea"})})),A=i.a.memo((function(){return null}));var D=function(){var e=Object(c.useReducer)(x,y),t=Object(s.a)(e,2),n=t[0],a=t[1],o=i.a.useMemo((function(){return function(e){var t=e.initialDelay,n=e.maxSpeed,c=new l.a(null),i=new l.a(null),a=Object(b.a)([c,i]).pipe(Object(h.a)((function(e){var t=Object(s.a)(e,2),n=t[0],c=t[1];if(!n||!c)return 0;var i=n.y+n.height-c.y;return i<=0?0:((i/=c.height)>=1&&(i=1),i=Math.ceil(10*i)/10)}))).pipe(Object(d.a)()),o=a.pipe(Object(h.a)((function(e){return 0!==e}))).pipe(Object(d.a)()).pipe(Object(O.a)((function(e){if(!e)return Object(f.a)(0);var c=Math.ceil(15),i=Object(p.a)(Object(f.a)(-1),Object(j.a)(100)).pipe(Object(g.a)(c),Object(h.a)((function(e){return(e+2)/c}))),o=Object(f.a)(0).pipe(Object(m.a)(t));return Object(p.a)(o,Object(b.a)([a,i]).pipe(Object(h.a)((function(e){var t=Object(s.a)(e,2),c=t[0],i=t[1];return console.log("accelerationFactor",i),c*n*i}))))})));return o.subscribe((function(e){console.log("scrollSpeed$",e)})),{setDraggableAbsLayout:function(e){return c.next(e)},setScrollAreaAbsLayout:function(e){return i.next(e)},scrollSpeed$:o}}({initialDelay:700,maxSpeed:1})}),[]),r=o.setDraggableAbsLayout,u=o.scrollSpeed$,D=o.setScrollAreaAbsLayout,N=Object(c.useRef)(),F=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=null;u.subscribe((function(t){e&&e(),0!==t&&(e=function(e,t,n){var c=(e=document.scrollingElement).scrollTop,i=(new Date).getTime(),a=null,o=0;return function r(){a=null;var u=(new Date).getTime(),s=(o+=n*(u-i)-o)+c;e.scrollTop=s,t<s||(a=requestAnimationFrame(r))}(),function(){a&&cancelAnimationFrame(a)}}(F.current,n.page.height-1e3,t))}));var t=N.current.getBoundingClientRect();D({x:t.left,y:t.top,height:t.height,width:t.width})}),[]),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(S,{ref:N}),Object(v.jsx)(A,{}),Object(v.jsx)("div",{ref:F,style:{height:n.page.height,width:n.page.width},className:"page",children:n.components.map((function(e){return Object(v.jsx)(w,{comp:e,onNewPos:function(t,n){a({type:"setNewPos",data:{id:e.id,pos:t}}),r(n)}},e.id)}))})]})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),c(e),i(e),a(e),o(e)}))};o.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(D,{})}),document.getElementById("root")),N()}},[[41,1,2]]]);
//# sourceMappingURL=main.b59c8df4.chunk.js.map