(this.webpackJsonpscroll=this.webpackJsonpscroll||[]).push([[0],{38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n.n(c),o=n(32),i=n.n(o),r=(n(38),n(19)),u=n(11),s=(n(39),n(33)),l=n(46),b=n(47),h=n(28),j=n(48),f=n(50),p=n(27),O=n(44),d=n(45),m=n(51),g=n(49),v=n(6);function w(e){var t=e.comp,n=e.onNewPos,a=Object(c.useState)(!1),o=Object(u.a)(a,2),i=o[0],r=o[1],s=Object(c.useRef)(null),l=Object(c.useRef)(null);return l.current=function(e){if(i){var c=s.current.getBoundingClientRect(),a={x:c.left,y:c.top,width:c.width,height:c.height};n({x:t.x+e.movementX,y:t.y+e.movementY},a)}},Object(c.useEffect)((function(){window.addEventListener("mousemove",(function(e){l.current(e)}))}),[]),Object(v.jsx)("div",{ref:s,style:{left:t.x,top:t.y,height:t.height,width:t.width},onMouseDown:function(){r(!0)},onMouseUp:function(){r(!1)},className:"comp"})}var y={page:{height:14e3,width:900},components:[{id:1,x:600,y:300,width:150,height:80}]},x=function(e,t){return"setNewPos"===t.type?Object(r.a)(Object(r.a)({},e),{},{components:e.components.map((function(e){return e.id===t.data.id?Object(r.a)(Object(r.a)({},e),t.data.pos):e}))}):e},A=a.a.forwardRef((function(e,t){var n=e.className;return Object(v.jsx)("div",{ref:t,style:{height:100},className:"scrollarea "+n})})),N=a.a.memo((function(){return null}));var M=function(){var e=Object(c.useReducer)(x,y),t=Object(u.a)(e,2),n=t[0],o=t[1],i=a.a.useMemo((function(){return function(e){Object(s.a)(e);var t=new l.a(null),n=new l.a(null),c=new l.a(null),a=Object(b.a)([t,n]).pipe(Object(p.a)((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1];if(!n||!c)return 0;var a=n.y+n.height-c.y;return a<=0?0:((a/=c.height)>=1&&(a=1),a=Math.ceil(20*a)/20)}))).pipe(Object(O.a)()),o=Object(b.a)([t,c]).pipe(Object(p.a)((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1];if(!n||!c)return 0;var a=c.y+c.height-n.y;return a<=0?0:((a/=c.height)>=1&&(a=1),a=Math.ceil(20*a)/20)}))).pipe(Object(O.a)()),i=Object(b.a)([o,a]).pipe(Object(p.a)((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1];return 0!==c?c:-1*n})));return{setDraggableAbsLayout:function(e){return t.next(e)},setBottomScrollAreaAbsLayout:function(e){return n.next(e)},setTopScrollAreaAbsLayout:function(e){return c.next(e)},scrollSpeed$:i.pipe(Object(p.a)((function(e){return 0!==e}))).pipe(Object(O.a)()).pipe(Object(d.a)((function(e){if(!e)return Object(h.a)(0);var t=Math.ceil(15),n=Object(j.a)(Object(h.a)(-1),Object(f.a)(100)).pipe(Object(m.a)(t),Object(p.a)((function(e){return(e+2)/t}))),c=Object(h.a)(0).pipe(Object(g.a)(300));return Object(j.a)(c,Object(b.a)([i,n]).pipe(Object(p.a)((function(e){var t=Object(u.a)(e,2),n=t[0],c=t[1],a=n<0?-1:1,o=Math.pow(Math.abs(n),1.5)*c;return 1*(o=Math.ceil(100*o)/100)*a}))))})))}}({})}),[]),r=i.setDraggableAbsLayout,M=i.scrollSpeed$,R=i.setBottomScrollAreaAbsLayout,S=i.setTopScrollAreaAbsLayout,L=Object(c.useRef)(),T=Object(c.useRef)(),B=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e=null,t=document.documentElement.scrollHeight-document.documentElement.clientHeight-100;console.log({maxScrollY:t}),M.subscribe((function(n){if(e&&e(),0!==n){var c=n<0?0:t;e=function(e,t,n){var c=(e=document.scrollingElement).scrollTop,a=(new Date).getTime(),o=null,i=0,r=0===t?-1:1;return t<=c*r?null:(function u(){o=null;var s=(new Date).getTime(),l=(i+=n*(s-a)-i)+c;e.scrollTop=l,t<=l*r||(o=requestAnimationFrame(u))}(),function(){o&&cancelAnimationFrame(o)})}(B.current,c,n)}}));var n=L.current.getBoundingClientRect();S({x:n.left,y:n.top,height:n.height,width:n.width});var c=T.current.getBoundingClientRect();R({x:c.left,y:c.top,height:c.height,width:c.width})}),[]),Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)(A,{className:"top",ref:L}),Object(v.jsx)(A,{className:"bottom",ref:T}),Object(v.jsx)(N,{}),Object(v.jsx)("div",{ref:B,style:{height:n.page.height,width:n.page.width},className:"page",children:n.components.map((function(e){return Object(v.jsx)(w,{comp:e,onNewPos:function(t,n){o({type:"setNewPos",data:{id:e.id,pos:t}}),r(n)}},e.id)}))})]})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),o(e),i(e)}))};i.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(M,{})}),document.getElementById("root")),R()}},[[41,1,2]]]);
//# sourceMappingURL=main.8b9b6a50.chunk.js.map